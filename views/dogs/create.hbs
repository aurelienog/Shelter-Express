<section class="bg-dog-shape bg-contain bg-no-repeat bg-center mb-14 min-w-fit">

  <div class="bg-white/55 my-10">

  <h1 class=" text-center text-3xl m-8 md:text-5xl">Welcome to the pack:</h1>

{{#if errors}} <div class="border border-red"> Review form data</div>{{/if}}


<form class=" w-4/5  gap-4 rounded-lg flex flex-col p-10 border border-black mx-auto md:space-y-0 md:p-10 md:grid md:grid-cols-3 md:w-4/5 md:gap-4" method="post" action="/dogs/create" enctype="multipart/form-data">
  
  <div class="border border-black rounded-lg flex flex-col p-2 md:col-start-1 row-start-1">
    {{#if errors.name}}<div class="text-red-600 mb-2">{{errors.name.message}}</div>{{/if}}
    <label for="name">Name</label>
    <input name="name" id="name" placeholder="Name" value="{{dog.name}}" class="block border-b-2 bg-transparent border-emerald-600  p-1 my-1 focus:bg-green-400 focus:placeholder:text-white focus:text-white {{#if errors.name}}border-red-600 border-2 placeholder-shown:bg-red-400 {{/if}}">
  </div>
  
  <div class="flex flex-col border border-black rounded-lg md:row-start-2 md:row-end-4">
    {{#if errors.image}}<div class="text-red-600 mb-2">{{errors.image.message}}</div>{{/if}}
    <label for="image-input">Please add a photo</label>
    <img id="image"  src="{{dog.image}}" width="200" alt="Image preview" />
    <input id="image-input" name="image" onchange="readURL(this)" accept="image/*" type="file" class=" p-2 my-2 focus:bg-green-400"/>
  </div>

    <div  class="border border-black rounded-lg md:col-start-2">
    {{#if errors.licence}}<div class="text-red-600 mb-2">{{errors.licence.message}}</div>{{/if}}
    <fieldset>
      <legend>Need a licence?</legend>
      <div>
        <input type="radio" id="yes" name="licence" value="yes">
        <label for="yes">Yes</label>
      </div>
        
      <div>
        <input type="radio" id="no" name="licence" value="no">
        <label for="no">No</label>
      </div>
    </fieldset>
  </div>

  <div class="border border-black rounded-lg md:col-start-2">
    {{#if errors.sex}}<div class="text-red-600 mb-2">{{errors.sex.message}}</div>{{/if}}
  
    <fieldset>
      <legend>Select a sex:</legend>
    
      <div>
        <input type="radio" id="male" name="sex" value="male">
        <label for="male">Male</label>
      </div>
    
      <div>
        <input type="radio" id="female" name="sex" value="female">
        <label for="female">Female</label>
      </div>
    </fieldset>
  </div>

  <div class="border border-black md:col-start-2">
    {{#if errors.age}}<div class="text-red-600 mb-2">{{errors.age.message}}</div>{{/if}}
    <label for="age">Age</label>
    <input name="age" placeholder="Age" id="age" value="{{dog.age}}" type="number"
      class="block border  focus:bg-green-400 focus:placeholder:text-white focus:text-white {{#if errors.age}}border-red-600 border-2 placeholder-shown:bg-red-400 {{/if}}">
  </div>
  
  <div class="border border-black md:col-start-3">
    <label for="breed">Breed</label>
    <input name="breed" id="breed" placeholder="breed" value="{{dog.breed}}">
  </div>
  

    <div class="border border-black md:col-start-3 md:row-start-1">
      {{#if errors.size}}<div class="text-red-600 mb-2">{{errors.size.message}}</div>{{/if}}
      <div>
        <fieldset>
          <legend>Choose a size:</legend>
          <div>
            <input type="radio" id="small" name="size" value="small">
            <label for="small">Small</label>
          </div>
          <div>
            <input type="radio" id="medium" name="size" value="medium">
            <label for="medium">Medium</label>
          </div>
          <div>
            <input type="radio" id="large" name="size" value="large">
            <label for="large">Large</label>
          </div>              
          <div>
            <input type="radio" id="xl" name="size" value="xl">
            <label for="xl">Extra-large</label>
          </div>
        </fieldset>
      </div>
      
    </div>
    


  <div  class="border border-black md:col-start-3 md:row-start-2 md:row-end-3"> 
    <label for="weight">Weight</label>
    <input name="weight" id="weight" type="Number" placeholder="Weight" value="{{dog.weight}}"
      class="block border  focus:bg-green-400 focus:placeholder:text-white focus:text-white {{#if errors.weight}}border-red-600 border-2 placeholder-shown:bg-red-400 {{/if}}">
  </div>


  <div class="md:col-span-2 flex flex-col justify-center border border-black">
    <label>Tell me more about our furry friend :</label>
    <textarea placeholder="Leave a comment..." value="{{dog.about}}"></textarea>
  </div>

  <div  class="border border-black md:col-start-3 md:row-start-4">
    <fieldset>
      <legend>Choose an ideal home?</legend>
    
      <div>
        <input type="radio" id="any" name="idealHome" value="any">
        <label for="any">Any Location</label>
      </div>
    
      <div>
        <input type="radio" id="away" name="idealHome" value="away">
        <label for="away">Away From Inner City</label>
      </div>

    </fieldset>
  </div> 


  <button type="submit"  class="max-w-40 max-h-18 py-4 px-2 border border-black rounded-lg bg-accent-color md:col-span-3">Submit</button>
</form>
</div>
</section>

<script>
  // Máximo tamaño permitido para el archivo (5MB)
  const MAX_FILE_SIZE = 10 * 1024 * 1024;

  // Actualiza la imagen en el cliente al seleccionar un archivo
  document.getElementById("image-input").onchange = (event) => {
    const file = event.target.files[0]; // Obtén el archivo cargado

    // Validar el tipo de archivo
    if (!file.type.startsWith("image/")) {
      alert("Por favor selecciona un archivo de imagen válido.");
      event.target.value = ""; // Limpia el input si no es válido
      return;
    }

    // Validar el tamaño del archivo
    if (file.size > MAX_FILE_SIZE) {
      alert("El archivo es demasiado grande. El tamaño máximo permitido es de 5MB.");
      event.target.value = ""; // Limpia el input si no es válido
      return;
    }

    // Usar FileReader para mostrar la vista previa de la imagen
    const reader = new FileReader();
    reader.onload = (e) => {
      document.getElementById("image").src = e.target.result; // Establece la URL de datos como src
    };
    reader.readAsDataURL(file); // Convierte el archivo en una URL de datos
  };
</script>